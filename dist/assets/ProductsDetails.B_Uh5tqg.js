import{r as e,j as a,X as s,h as i,P as r}from"./vendor.KJucXqrG.js";import{a as o}from"./index.Dm68Z6Kj.js";const n=({produto:n,onClose:l,adicionarAoCarrinho:c,irParaCarrinho:t,voltarParaProdutos:d})=>{const[m,h]=e.useState(1),[p,u]=e.useState(""),[g,j]=e.useState(!1),[x,v]=e.useState(!1);if(!n)return null;const N=n.productname||n.name||n.nome||"Produto",b=((n.price||n.preco||0)*m).toFixed(2),F=n.ingredientesDetalhados||(n.ingredientes?Array.isArray(n.ingredientes)?n.ingredientes:n.ingredientes.split(",").map((e=>e.trim())):n.ingredients?n.ingredients.split(",").map((e=>e.trim())):[]),C=n.alergenicosDetalhados||(n.alergenicos?Array.isArray(n.alergenicos)?n.alergenicos:n.alergenicos.split(",").map((e=>e.trim())):n["allergenic-agents"]?n["allergenic-agents"].split(",").map((e=>e.trim())):[]),f=p&&p.trim().length>=5,k=f?`${n.id}-${Math.floor(1e5*Math.random())}`:n.id;return a.jsx("div",{className:"overlay",onClick:l,children:a.jsxs("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[a.jsx("button",{className:"close-btn",onClick:l,children:a.jsx(s,{})}),a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{className:"modal-header-left",children:[a.jsx("img",{src:n.imageUrl||n.image||o(n.images||n.imagePath)||"/default.webp",alt:N,className:"produto-img-modal"}),a.jsxs("div",{className:"produto-header",children:[a.jsx("h3",{children:N}),!1===n.available&&a.jsx("div",{className:"produto-indisponivel",children:"Produto Indisponível"})]})]}),a.jsxs("div",{className:"modal-header-right",children:[a.jsxs("div",{className:"preco-total",children:["R$ ",b]}),a.jsxs("div",{className:"produto-detalhes",children:[a.jsx("p",{children:n.description}),a.jsxs("p",{children:[a.jsx("strong",{children:"Ingredientes:"})," ",F.length>0?F.join(", "):"Não informados"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Alergênicos:"})," ",C.length>0?C.join(", "):"Não informados"]}),!1!==n.available&&a.jsxs("div",{className:"comentario-area",children:[a.jsx("label",{htmlFor:"comentario",className:"comentario-label",children:"Algum comentário?"}),a.jsx("textarea",{id:"comentario",className:"comentario-input",value:p,onChange:e=>u(e.target.value),placeholder:"Ex: Retirar cebola, adicionar maionese..."})]})]})]})]}),a.jsx("div",{className:"produto-footer",children:g?a.jsx("div",{className:"mensagem-sucesso",children:"Produto adicionado com sucesso!"}):x?a.jsxs("div",{className:"opcoes-pos-adicao",children:[a.jsx("button",{className:"link-opcao",onClick:()=>{v(!1),l(),d()},children:"Comprar mais"}),a.jsx("button",{className:"link-opcao",onClick:()=>{v(!1),l(),t()},children:"Ir para o carrinho"})]}):a.jsx(a.Fragment,{children:!1!==n.available?a.jsxs("div",{className:"contador-quantidade",children:[a.jsxs("div",{className:"quantidade",children:[a.jsx("button",{className:"btn-counter",onClick:()=>h((e=>e>1?e-1:1)),disabled:m<=1,"aria-label":"Diminuir quantidade",children:a.jsx(i,{size:20,color:"#FFFFFF"})}),a.jsx("div",{className:"contador-valor",children:m}),a.jsx("button",{className:"btn-counter",onClick:()=>h((e=>e+1)),"aria-label":"Aumentar quantidade",children:a.jsx(r,{size:20,color:"#FFFFFF"})})]}),a.jsx("div",{className:"adicionar-itens",children:a.jsxs("button",{className:"btn-adicionar-carrinho",onClick:()=>{const e={id:k,productname:N,name:N,nome:N,price:n.price||n.preco||0,preco:n.price||n.preco||0,precoTotal:parseFloat(b),quantidade:m,comentario:f?p.trim():"",imageUrl:n.imageUrl||n.image||o(n.images||n.imagePath)};c(e),j(!0),v(!0),setTimeout((()=>{j(!1)}),750)},children:["Adicionar - R$ ",b]})})]}):a.jsx("div",{className:"produto-indisponivel-mensagem",children:"Este produto não está disponível para compra no momento."})})})]})})};export{n as default};
