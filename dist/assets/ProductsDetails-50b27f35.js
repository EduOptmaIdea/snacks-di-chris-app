import{r,j as e,X as A,b as D,P as M}from"./vendor-6172415f.js";import{a as S}from"./index-ab8fc89b.js";const R=({produto:a,onClose:i,adicionarAoCarrinho:h,irParaCarrinho:x,voltarParaProdutos:j})=>{const[c,o]=r.useState(1),[n,u]=r.useState(""),[p,d]=r.useState(!1),[g,t]=r.useState(!1);if(!a)return null;const N=()=>o(s=>s+1),v=()=>o(s=>s>1?s-1:1),l=(a.price*c).toFixed(2),b=a.ingredients?a.ingredients.split(",").map(s=>s.trim()):[],F=a["allergenic-agents"]?a["allergenic-agents"].split(",").map(s=>s.trim()):[],m=n&&n.trim().length>=5,f=m?`${a.id}-${Math.floor(Math.random()*1e5)}`:a.id,k=()=>{const s={id:f,productname:a.productname,price:a.price,precoTotal:parseFloat(l),quantidade:c,comentario:m?n.trim():"",imageUrl:S(a.images)};h(s),d(!0),t(!0),setTimeout(()=>{d(!1)},750)},C=()=>{t(!1),i(),j()},P=()=>{t(!1),i(),x()};return e.jsx("div",{className:"overlay",onClick:i,children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(A,{})}),e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-header-left",children:[e.jsx("img",{src:a.imageUrl||"/products/default.jpg",alt:a.productname,className:"produto-img-modal"}),e.jsx("div",{className:"produto-header",children:e.jsx("h3",{children:a.productname})})]}),e.jsxs("div",{className:"modal-header-right",children:[e.jsxs("div",{className:"preco-total",children:["Total: R$ ",l]}),e.jsxs("div",{className:"produto-detalhes",children:[e.jsx("p",{children:a.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ingredientes:"})," ",b.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Alergênicos:"})," ",F.join(", ")]}),e.jsxs("div",{className:"comentario-area",children:[e.jsx("label",{htmlFor:"comentario",className:"comentario-label",children:"Algum comentário?"}),e.jsx("textarea",{id:"comentario",className:"comentario-input",value:n,onChange:s=>u(s.target.value),placeholder:"Ex: Retirar cebola, adicionar maionese..."})]})]})]})]}),e.jsx("div",{className:"produto-footer",children:p?e.jsx("div",{className:"mensagem-sucesso",children:"Produto adicionado com sucesso!"}):g?e.jsxs("div",{className:"opcoes-pos-adicao",children:[e.jsx("button",{className:"link-opcao",onClick:C,children:"Comprar mais"}),e.jsx("button",{className:"link-opcao",onClick:P,children:"Ir para o carrinho"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"contador-quantidade",children:[e.jsx("button",{className:"btn-counter",onClick:v,disabled:c<=1,"aria-label":"Diminuir quantidade",children:e.jsx(D,{size:20,color:"#FFFFFF"})}),e.jsx("div",{className:"contador-valor",children:c}),e.jsx("button",{className:"btn-counter",onClick:N,"aria-label":"Aumentar quantidade",children:e.jsx(M,{size:20,color:"#FFFFFF"})}),e.jsxs("button",{className:"btn-adicionar-carrinho",onClick:k,children:["Adicionar - R$ ",l]})]})})})]})})};export{R as default};
