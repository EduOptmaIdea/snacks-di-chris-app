import{r as u,j as a,X as z,b as C,P as f,T as k}from"./vendor-6172415f.js";import F from"./Checkout-38488887.js";import{a as q}from"./index-ab8fc89b.js";const P=""+new URL("carrinho-vazio-4723b885.svg",import.meta.url).href,U=({items:l,onClose:e,onRemoveItem:p,onClearCart:t,voltarParaProdutos:d,onUpdateQuantidade:h})=>{const[c,m]=u.useState(l.reduce((s,r)=>({...s,[r.id]:r.quantidade||1}),{})),[v,x]=u.useState(!1),n=l.map(s=>({...s,imageUrl:s.imageUrl||q(s.images||s.image)})),N=s=>{m(r=>{const i=(r[s]||1)+1;return h(s,i),{...r,[s]:i}})},b=s=>{m(r=>{const i=Math.max(1,(r[s]||1)-1);return h(s,i),{...r,[s]:i}})},j=n.reduce((s,r)=>{const i=c[r.id]||1;return s+r.price*i},0).toFixed(2),g=()=>{x(!0)},o=()=>{x(!1)};return a.jsxs("div",{className:"overlay",onClick:e,children:[a.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[a.jsx("button",{className:"close-btn",onClick:e,children:a.jsx(z,{})}),a.jsx("div",{className:"carrinho-content",children:n.length===0?a.jsxs("div",{className:"carrinho-vazio",children:[a.jsx("img",{src:P,alt:"Carrinho vazio",className:"img-vazio"}),a.jsx("h2",{children:"Carrinho vazio"}),a.jsx("button",{className:"btn-voltar",onClick:()=>{e(),d()},children:"Voltar aos produtos"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"itens-carrinho",children:n.map(s=>a.jsxs("div",{className:"item",children:[a.jsx("img",{src:s.imageUrl||"/products/default.jpg",alt:s.productname,className:"item-img-pequena",onError:r=>{r.target.src="/products/default.jpg",r.target.onerror=null}}),a.jsxs("div",{className:"item-details",children:[a.jsx("h3",{children:s.productname}),s.comentario&&a.jsxs("p",{className:"comentario-item",children:["Obs: ",s.comentario]}),a.jsxs("div",{className:"preco",children:["R$ ",(s.price*(c[s.id]||1)).toFixed(2)]}),a.jsxs("div",{className:"contador-quantidade",children:[a.jsx("button",{onClick:()=>b(s.id),disabled:c[s.id]<=1,"aria-label":"Diminuir quantidade",children:a.jsx(C,{size:17})}),a.jsx("div",{className:"contador-valor",children:c[s.id]||1}),a.jsx("button",{onClick:()=>N(s.id),"aria-label":"Aumentar quantidade",children:a.jsx(f,{size:17})}),a.jsx("button",{onClick:()=>p(s.id),"aria-label":"Remover item",className:"text-xs",children:a.jsx(k,{size:17})})]})]})]},`${s.id}-${s.comentario||""}`.replace(/\s+/g,"-")))}),a.jsxs("div",{className:"carrinho-footer",children:[a.jsx("div",{className:"total",children:a.jsxs("span",{children:["Total: R$ ",j]})}),a.jsxs("div",{className:"botoes-carrinho",children:[a.jsx("button",{className:"btn-voltar",onClick:()=>{e(),d()},children:"Comprar mais"}),a.jsx("button",{className:"btn-finalizar",onClick:g,disabled:n.length===0,children:"Finalizar compra"}),a.jsx("button",{className:"btn-limpar",onClick:t,disabled:n.length===0,children:"Limpar carrinho"})]})]})]})})]}),v&&a.jsx("div",{className:"finalizacao-overlay",onClick:o,children:a.jsx("div",{className:"finalizacao-modal",onClick:s=>s.stopPropagation(),children:a.jsx(F,{carrinho:n,totalPedido:j,onCancelar:o,limparCarrinho:t,voltarParaInicio:()=>{o(),e()}})})})]})};export{U as default};
