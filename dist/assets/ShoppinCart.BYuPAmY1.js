import{r as a,j as s,X as e,q as i,P as l,T as r}from"./vendor.DXQOuDrH.js";import c from"./Checkout._JpA_ogd.js";import{a as o}from"./index.CGg7ljrz.js";const n=({items:n,onClose:t,onRemoveItem:d,onClearCart:m,voltarParaProdutos:h,onUpdateQuantidade:x})=>{const[j,u]=a.useState(n.reduce(((a,s)=>({...a,[s.id]:s.quantidade||1})),{})),[v,p]=a.useState(!1),b=n.map((a=>({...a,imageUrl:a.imageUrl||o(a.images||a.image)}))),g=b.reduce(((a,s)=>{const e=j[s.id]||1;return a+s.price*e}),0).toFixed(2),N=()=>{p(!1)};return s.jsxs("div",{className:"overlay",onClick:t,children:[s.jsxs("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[s.jsx("button",{className:"close-btn",onClick:t,children:s.jsx(e,{})}),s.jsx("div",{className:"carrinho-content",children:0===b.length?s.jsxs("div",{className:"carrinho-vazio",children:[s.jsx("img",{src:"data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20data-name='Your%20Icons'%20id='Your_Icons'%20viewBox='0%200%2048%2048'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23939598;}.cls-2{fill:%23be1e2d;}.cls-3{fill:%23fff;}%3c/style%3e%3c/defs%3e%3ctitle/%3e%3cpath%20class='cls-1'%20d='M37,15H33.91A5.47,5.47,0,0,1,34,16a6,6,0,1,1-12,0,6.53,6.53,0,0,1,.08-1H17.15l-1.27-3.64A5,5,0,0,0,11.16,8H8a1,1,0,0,0,0,2h3.16A3,3,0,0,1,14,12l1,3h0l2.5,7.09,2.62,7.55A5,5,0,0,0,24.85,33H30a1,1,0,0,0,0-2H24.85A3,3,0,0,1,22,29H32.77a6.07,6.07,0,0,0,5.94-4.74l1.22-5.63A3,3,0,0,0,37,15Zm1,3.21-1.22,5.63a4.08,4.08,0,0,1-4,3.16H21.35l-2-5.61L17.84,17h2.22a7.87,7.87,0,0,0,2.35,4.72A8,8,0,0,0,35.94,17h1a1,1,0,0,1,.82.39A1,1,0,0,1,38,18.21Z'/%3e%3cpath%20class='cls-1'%20d='M20,33a3,3,0,1,0,3,3A3,3,0,0,0,20,33Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,20,37Z'/%3e%3cpath%20class='cls-1'%20d='M34,33a3,3,0,1,0,3,3A3,3,0,0,0,34,33Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,34,37Z'/%3e%3cpath%20class='cls-2'%20d='M28,8a8,8,0,1,0,8,8A8,8,0,0,0,28,8Z'/%3e%3cpath%20class='cls-3'%20d='M29.41,16l1.3-1.29a1,1,0,0,0-1.42-1.42L28,14.59l-1.29-1.3a1,1,0,0,0-1.42,1.42L26.59,16l-1.3,1.29a1,1,0,0,0,1.42,1.42L28,17.41l1.29,1.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'/%3e%3c/svg%3e",alt:"Carrinho vazio",className:"img-vazio"}),s.jsx("h2",{children:"Carrinho vazio"}),s.jsx("button",{className:"btn-voltar-aos-produtos",onClick:()=>{t(),h()},children:"Voltar aos produtos"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"itens-carrinho",children:b.map((a=>s.jsxs("div",{className:"item",children:[s.jsx("img",{src:a.imageUrl||"/default.webp",alt:a.productname,className:"item-img-pequena",onError:a=>{a.target.src="/default.webp",a.target.onerror=null}}),s.jsxs("div",{className:"item-details",children:[s.jsx("h3",{children:a.productname}),a.comentario&&s.jsxs("p",{className:"comentario-item",children:["Obs: ",a.comentario]}),s.jsxs("div",{className:"preco",children:["R$ ",(a.price*(j[a.id]||1)).toFixed(2)]}),s.jsxs("div",{className:"contador-quantidade",children:[s.jsx("button",{onClick:()=>{return s=a.id,void u((a=>{const e=Math.max(1,(a[s]||1)-1);return x(s,e),{...a,[s]:e}}));var s},disabled:j[a.id]<=1,"aria-label":"Diminuir quantidade",children:s.jsx(i,{size:17})}),s.jsx("div",{className:"contador-valor",children:j[a.id]||1}),s.jsx("button",{onClick:()=>{return s=a.id,void u((a=>{const e=(a[s]||1)+1;return x(s,e),{...a,[s]:e}}));var s},"aria-label":"Aumentar quantidade",children:s.jsx(l,{size:17})}),s.jsx("button",{onClick:()=>d(a.id),"aria-label":"Remover item",className:"text-xs",children:s.jsx(r,{size:17})})]})]})]},`${a.id}-${a.comentario||""}`.replace(/\s+/g,"-"))))}),s.jsxs("div",{className:"carrinho-footer",children:[s.jsx("div",{className:"total",children:s.jsxs("span",{children:["Total: R$ ",g]})}),s.jsxs("div",{className:"botoes-carrinho",children:[s.jsx("button",{className:"btn-comprar-mais",onClick:()=>{t(),h()},children:"Comprar mais"}),s.jsx("button",{className:"btn-finalizar",onClick:()=>{p(!0)},disabled:0===b.length,children:"Finalizar compra"}),s.jsx("button",{className:"btn-limpar",onClick:m,disabled:0===b.length,children:"Limpar carrinho"})]})]})]})})]}),v&&s.jsx("div",{className:"finalizacao-overlay",onClick:N,children:s.jsx("div",{className:"finalizacao-modal",onClick:a=>a.stopPropagation(),children:s.jsx(c,{carrinho:b,totalPedido:g,onCancelar:N,limparCarrinho:m,voltarParaInicio:()=>{N(),t()}})})})]})};export{n as default};
