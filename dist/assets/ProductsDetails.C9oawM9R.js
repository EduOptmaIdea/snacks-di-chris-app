import{r as a,j as e,X as s,h as i,P as o}from"./vendor.KJucXqrG.js";import{a as r}from"./index.DM8JbhO8.js";const n=({produto:n,onClose:l,adicionarAoCarrinho:c,irParaCarrinho:d,voltarParaProdutos:t})=>{const[m,h]=a.useState(1),[p,u]=a.useState(""),[j,x]=a.useState(!1),[v,N]=a.useState(!1);if(!n)return null;const g=(n.price*m).toFixed(2),b=n.ingredients?n.ingredients.split(",").map((a=>a.trim())):[],F=n["allergenic-agents"]?n["allergenic-agents"].split(",").map((a=>a.trim())):[],C=p&&p.trim().length>=5,k=C?`${n.id}-${Math.floor(1e5*Math.random())}`:n.id;return e.jsx("div",{className:"overlay",onClick:l,children:e.jsxs("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"close-btn",onClick:l,children:e.jsx(s,{})}),e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-header-left",children:[e.jsx("img",{src:n.imageUrl||"/products/default.jpg",alt:n.productname,className:"produto-img-modal"}),e.jsxs("div",{className:"produto-header",children:[e.jsx("h3",{children:n.productname}),!1===n.available&&e.jsx("div",{className:"produto-indisponivel",children:"Produto Indisponível"})]})]}),e.jsxs("div",{className:"modal-header-right",children:[e.jsxs("div",{className:"preco-total",children:["Total: R$ ",g]}),e.jsxs("div",{className:"produto-detalhes",children:[e.jsx("p",{children:n.description}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ingredientes:"})," ",b.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Alergênicos:"})," ",F.join(", ")]}),!1!==n.available&&e.jsxs("div",{className:"comentario-area",children:[e.jsx("label",{htmlFor:"comentario",className:"comentario-label",children:"Algum comentário?"}),e.jsx("textarea",{id:"comentario",className:"comentario-input",value:p,onChange:a=>u(a.target.value),placeholder:"Ex: Retirar cebola, adicionar maionese..."})]})]})]})]}),e.jsx("div",{className:"produto-footer",children:j?e.jsx("div",{className:"mensagem-sucesso",children:"Produto adicionado com sucesso!"}):v?e.jsxs("div",{className:"opcoes-pos-adicao",children:[e.jsx("button",{className:"link-opcao",onClick:()=>{N(!1),l(),t()},children:"Comprar mais"}),e.jsx("button",{className:"link-opcao",onClick:()=>{N(!1),l(),d()},children:"Ir para o carrinho"})]}):e.jsx(e.Fragment,{children:!1!==n.available?e.jsxs("div",{className:"contador-quantidade",children:[e.jsxs("div",{className:"quantidade",children:[e.jsx("button",{className:"btn-counter",onClick:()=>h((a=>a>1?a-1:1)),disabled:m<=1,"aria-label":"Diminuir quantidade",children:e.jsx(i,{size:20,color:"#FFFFFF"})}),e.jsx("div",{className:"contador-valor",children:m}),e.jsx("button",{className:"btn-counter",onClick:()=>h((a=>a+1)),"aria-label":"Aumentar quantidade",children:e.jsx(o,{size:20,color:"#FFFFFF"})})]}),e.jsx("div",{className:"adicionar-itens",children:e.jsxs("button",{className:"btn-adicionar-carrinho",onClick:()=>{const a={id:k,productname:n.productname,price:n.price,precoTotal:parseFloat(g),quantidade:m,comentario:C?p.trim():"",imageUrl:r(n.images)};c(a),x(!0),N(!0),setTimeout((()=>{x(!1)}),750)},children:["Adicionar - R$ ",g]})})]}):e.jsx("div",{className:"produto-indisponivel-mensagem",children:"Este produto não está disponível para compra no momento."})})})]})})};export{n as default};
