import{R as e,r as a,j as t,U as r,Y as o}from"./vendor.C1IAPEQE.js";import{a as s}from"./index.dfeDPvWL.js";const i=window.innerWidth<768?4:6;function c(){return t.jsxs("div",{className:"produto-card skeleton",children:[t.jsx("div",{className:"produto-img skeleton-img"}),t.jsxs("div",{className:"produto-info",children:[t.jsx("div",{className:"skeleton-text"}),t.jsx("div",{className:"skeleton-text small"})]})]})}const n=e.memo((function({categoriaSelecionada:e,produtos:n=[],onProdutoClick:l,categoriasFromFirebase:d=[],categoriasOrdenadas:p=[],onVoltar:m}){const[u,g]=a.useState(""),[x,h]=a.useState(!0);a.useEffect((()=>{const e=setTimeout((()=>h(!1)),1e3);return()=>clearTimeout(e)}),[n]);const j=e=>{if(!e)return"/default.webp";if(e&&e.includes&&e.includes("firebasestorage.googleapis.com"))return e;if(e&&e.endsWith&&e.endsWith(".webp"))return e;const a=e&&e.split?e.split("?")[0]:e;return a&&a.replace?a.replace(/\.(jpg|jpeg|png)$/i,".webp"):"//default.webp"},y=n.map((e=>{const a=e.productName||e.productname||e.name||e.nome||"Produto";return{...e,id:e.id||Math.random().toString(36).substring(2),productname:a,name:a,nome:a,description:e.description||"",price:e.price||e.preco||0,preco:e.price||e.preco||0,category:e.category||e.categoria||"",categoria:e.category||e.categoria||"",imageUrl:e.image?j(e.image):j(s(e.imagePath||e.images))}})),N=["Batata recheada","Batata Rosti","Mandioca Rosti","Sobremesas","Bebidas"];let v=d.length>0?[...d]:N.map((e=>({category:e,name:e})));v.sort(((e,a)=>{const t=N.indexOf(e.category),r=N.indexOf(a.category);return-1!==t&&-1!==r?t-r:-1!==t?-1:-1!==r?1:0}));const f=y.filter((e=>e.productname.toLowerCase().includes(u.toLowerCase()))),b=v.map((e=>{const a=e.category||e.name,t=f.filter((e=>e.category===a||e.categoria===a));return{nome:a,produtos:t}})).filter((e=>e.produtos.length>0)),w=e?f.filter((a=>a.category===e.category||a.categoria===e.category||e.id&&a.categoryId===e.id)):f,k=e=>{const a=!1===e.available;return t.jsxs(r.div,{className:"produto-card relative group cursor-pointer "+(a?"opacity-60":""),onClick:a?void 0:()=>l(e),whileHover:a?{}:{scale:1.03},style:{pointerEvents:a?"none":"auto"},children:[a&&t.jsx("div",{className:"overlay-indisponivel",children:t.jsx("span",{className:"label-indisponivel",children:"IndisponÃ­vel no momento"})}),t.jsx("div",{className:"produto-img-container",children:t.jsxs("picture",{children:[t.jsx("source",{srcSet:e.imageUrl,type:"image/webp"}),t.jsx("img",{src:e.imageUrl&&e.imageUrl.replace?e.imageUrl.replace(".webp",".jpg"):"/default.webp",alt:e.productname,className:"produto-img",loading:"lazy",onError:e=>{e.target.src="//default.webp"}})]})}),t.jsxs("div",{className:"produto-info",children:[t.jsx("p",{className:"produto-nome",children:e.productname}),t.jsx("p",{className:"produto-descricao",children:e.description}),t.jsxs("p",{className:"produto-preco",children:["R$ ","number"==typeof e.price?e.price.toFixed(2):parseFloat(e.price||0).toFixed(2)]})]})]},e.id)};return t.jsxs(r.section,{className:"frame",initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{duration:.3},children:[t.jsxs("div",{className:"busca-e-volta",children:[t.jsx("input",{type:"text",placeholder:"Buscar produto...",className:"campo-busca",value:u,onChange:e=>g(e.target.value)}),t.jsxs("button",{className:"btn-voltar",onClick:m,children:[t.jsx("span",{className:"btn-icon",children:t.jsx(o,{size:20})}),t.jsx("span",{className:"btn-text",children:"Voltar"})]})]}),e&&t.jsx("div",{className:"frame-title-area",children:t.jsx("h2",{className:"categoria-titulo",children:t.jsx("span",{className:"neufreit cor1",children:e.category||e.name||"Produtos"})})}),e?t.jsx(r.div,{className:"produtos-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:x?Array.from({length:i}).map(((e,a)=>t.jsx(c,{},a))):w.length>0?w.map(k):t.jsx("div",{className:"sem-produtos",children:"Nenhum produto encontrado nesta categoria."})}):b.length>0?b.map(((e,a)=>t.jsxs("div",{className:"categoria-grupo",children:[t.jsx("div",{className:"categoria-titulo-container",children:t.jsx("h2",{className:"categoria-titulo",children:t.jsx("span",{className:"neufreit cor1",children:e.nome.toUpperCase()})})}),t.jsx(r.div,{className:"produtos-carrossel carrossel-horizontal",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a,duration:.3},children:x?Array.from({length:i}).map(((e,a)=>t.jsx(c,{},a))):e.produtos.map(k)})]},a))):t.jsx("div",{className:"sem-produtos",children:"Nenhum produto encontrado. Tente outra busca."})]})}));export{n as default};
